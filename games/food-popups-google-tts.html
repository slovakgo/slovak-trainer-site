<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>–ü—Ä–æ–¥—É–∫—Ç—ã (SK) ‚Äî —Ñ–æ—Ç–æ + –æ–∑–≤—É—á–∫–∞</title>
  <!-- –∏–∑–±–µ–≥–∞–µ–º 404 –Ω–∞ favicon -->
  <link rel="icon" href="../favicon-32.png" type="image/png">
  <style>
    :root{
      --ok:#16a34a;--bad:#ef4444;--ink:#1f2937;--muted:#6b7280;--card:#fff;--brand:#00bfa5;
    }
    html,body{margin:0;background:transparent;color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
    .wrap{max-width:1100px;margin:24px auto 56px;padding:0 20px}
    header{display:flex;gap:12px;align-items:center;justify-content:space-between;margin:12px 0 10px;flex-wrap:wrap}
    .pill{border:1px solid #e5e7eb;background:#fff;color:#111827;padding:8px 12px;border-radius:999px;cursor:pointer;font-weight:600}
    .pill.active{background:var(--brand);color:#fff;border-color:transparent}
    h1{font-size:28px;margin:6px 0 2px}
    .meta{color:var(--muted);margin-top:2px}
    .prompt{margin:18px 0 6px;font-size:20px;font-weight:700;}
    .hint{color:var(--muted);margin-top:2px}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(208px,1fr));gap:12px;margin-top:14px}
    .card{background:var(--card);border-radius:14px;box-shadow:0 10px 28px rgba(0,0,0,.08);padding:14px 10px 12px;text-align:center}
    .photo{display:flex;align-items:center;justify-content:center;min-height:120px}
    .photo img{max-width:120px;max-height:120px;display:block}
    .title{margin-top:10px;font-weight:700}
    .ok{outline:3px solid var(--ok)}
    .wrong{outline:3px solid var(--bad)}
    .toolbar{display:flex;gap:8px;align-items:center}
    .score{font-weight:700}
    .toast{position:fixed;left:50%;bottom:22px;transform:translateX(-50%);background:#111827;color:#fff;padding:10px 14px;border-radius:10px;opacity:0;pointer-events:none;transition:.25s}
    .toast.show{opacity:1}
  </style>
</head>
<body>
  <main class="wrap">
    <header>
      <div>
        <h1>üïπ –ü—Ä–æ–¥—É–∫—Ç—ã –Ω–∞ —Å–ª–æ–≤–∞—Ü–∫–æ–º ‚Äî —Ñ–æ—Ç–æ + –æ–∑–≤—É—á–∫–∞</h1>
        <div class="meta">–Ø–∑—ã–∫: <span id="meta">–†—É—Å—Å–∫–∏–π</span></div>
      </div>
      <div class="toolbar">
        <button class="pill" data-lang="ua">ua –£–∫—Ä–∞—ó–Ω—Å—å–∫–∞</button>
        <button class="pill active" data-lang="ru">ru –†—É—Å—Å–∫–∏–π</button>
        <button class="pill" data-lang="en">en English</button>
      </div>
    </header>

    <p class="prompt" id="prompt"></p>
    <p class="hint" id="hint"></p>

    <div class="grid" id="grid" aria-live="polite"></div>

    <div class="toolbar" style="margin-top:12px">
      <span class="score" id="score">0 / 0</span>
      <span class="meta" style="margin-left:10px">–ü—Ä–∏ –≤–µ—Ä–Ω–æ–º –æ—Ç–≤–µ—Ç–µ: –æ–∑–≤—É—á–∫–∞ (SK), –∑–∞—Ç–µ–º –∞–≤—Ç–æ-–ø–µ—Ä–µ—Ö–æ–¥</span>
    </div>
  </main>

  <div class="toast" id="toast"></div>

<script>
/* === –¥–∞–Ω–Ω—ã–µ (–ª–æ–∫–∞–ª—å–Ω—ã–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏ –∏–∑ /games/images) === */
const ITEMS = [
  { sk:'chlieb',   ua:'—Ö–ª—ñ–±',     ru:'—Ö–ª–µ–±',      en:'bread',  img:'images/chlieb.jpg' },
  { sk:'mlieko',   ua:'–º–æ–ª–æ–∫–æ',   ru:'–º–æ–ª–æ–∫–æ',    en:'milk',   img:'images/mlieko.jpg' },
  { sk:'jablko',   ua:'—è–±–ª—É–∫–æ',   ru:'—è–±–ª–æ–∫–æ',    en:'apple',  img:'images/jablko.jpg' },
  { sk:'syr',      ua:'—Å–∏—Ä',      ru:'—Å—ã—Ä',       en:'cheese', img:'images/syr.jpg' },
  { sk:'vajce',    ua:'—è–π—Ü–µ',     ru:'—è–π—Ü–æ',      en:'egg',    img:'images/vajce.jpg' },
  { sk:'m√§so',     ua:'–º‚Äô—è—Å–æ',    ru:'–º—è—Å–æ',      en:'meat',   img:'images/maso.jpg' },
  { sk:'voda',     ua:'–≤–æ–¥–∞',     ru:'–≤–æ–¥–∞',      en:'water',  img:'images/voda.jpg' },
  { sk:'k√°va',     ua:'–∫–∞–≤–∞',     ru:'–∫–æ—Ñ–µ',      en:'coffee', img:'images/kava.jpg' },
  { sk:'cukor',    ua:'—Ü—É–∫–æ—Ä',    ru:'—Å–∞—Ö–∞—Ä',     en:'sugar',  img:'images/cukor.jpg' },
  { sk:'paradajka',ua:'–ø–æ–º—ñ–¥–æ—Ä',  ru:'–ø–æ–º–∏–¥–æ—Ä',   en:'tomato', img:'images/paradajka.jpg' },
  { sk:'kol√°ƒç',    ua:'–ø–∏—Ä—ñ–≥',    ru:'–ø–∏—Ä–æ–≥',     en:'cake',   img:'images/kolac.jpg' },
  { sk:'ry≈æa',     ua:'—Ä–∏—Å',      ru:'—Ä–∏—Å',       en:'rice',   img:'images/ryza.jpg' },
  { sk:'soƒæ',      ua:'—Å—ñ–ª—å',     ru:'—Å–æ–ª—å',      en:'salt',   img:'images/sol.jpg' },
  { sk:'maslo',    ua:'–º–∞—Å–ª–æ',    ru:'–º–∞—Å–ª–æ',     en:'butter', img:'images/maslo.jpg' },
  { sk:'ƒçaj',      ua:'—á–∞–π',      ru:'—á–∞–π',       en:'tea',    img:'images/caj.jpg' },
  { sk:'ban√°n',    ua:'–±–∞–Ω–∞–Ω',    ru:'–±–∞–Ω–∞–Ω',     en:'banana', img:'images/banan.jpg' },
  { sk:'polievka', ua:'—Å—É–ø',      ru:'—Å—É–ø',       en:'soup',   img:'images/polievka.jpg' },
  { sk:'mlieko',   ua:'–º–æ–ª–æ–∫–æ',   ru:'–º–æ–ª–æ–∫–æ',    en:'milk',   img:'images/mlieko.jpg' },
  { sk:'vajce',    ua:'—è–π—Ü–µ',     ru:'—è–π—Ü–æ',      en:'egg',    img:'images/vajce.jpg' },
  { sk:'zemiak',   ua:'–∫–∞—Ä—Ç–æ–ø–ª—è', ru:'–∫–∞—Ä—Ç–æ—Ñ–µ–ª—å', en:'potato', img:'images/zemiak.jpg' }
];

/* === —Ç–µ–∫—Å—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ === */
const UI = {
  ru:{ find:'–ù–∞–π–¥–∏—Ç–µ —Å–ª–æ–≤–æ:',  help:'–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –Ω–∞ —Å–ª–æ–≤–∞—Ü–∫–æ–º', meta:'–Ø–∑—ã–∫: –†—É—Å—Å–∫–∏–π' },
  ua:{ find:'–ó–Ω–∞–π–¥–∏ —Å–ª–æ–≤–æ:',   help:'–û–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç —Å–ª–æ–≤–∞—Ü—å–∫–æ—é',     meta:'–ú–æ–≤–∞: –£–∫—Ä–∞—ó–Ω—Å—å–∫–∞' },
  en:{ find:'Find the word:',  help:'Pick the correct Slovak word',             meta:'Language: English' }
};

/* === —Å–æ—Å—Ç–æ—è–Ω–∏–µ === */
let lang='ru', score=0, total=ITEMS.length, current=null, pool=[...ITEMS];

const elGrid  = document.getElementById('grid');
const elPrompt= document.getElementById('prompt');
const elHint  = document.getElementById('hint');
const elMeta  = document.getElementById('meta');
const elScore = document.getElementById('score');
const elToast = document.getElementById('toast');

function setLang(code){
  lang = code;
  document.querySelectorAll('.pill').forEach(b=>{
    b.classList.toggle('active', b.dataset.lang===code);
  });
  elMeta.textContent = UI[lang].meta;
  elHint.textContent = UI[lang].help;
  newRound(true);
}

function pick(n, arr){
  const src = [...arr];
  const out = [];
  while (out.length < n && src.length){
    out.push(src.splice(Math.floor(Math.random()*src.length),1)[0]);
  }
  return out;
}

/* === –æ–∑–≤—É—á–∫–∞ —Å–ª–æ–≤–∞ –ø–æ-—Å–ª–æ–≤–∞—Ü–∫–∏ === */
function speakSK(text){
  // 1) –ø—Ä–æ–±—É–µ–º —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ö–æ—Ä–æ—à–∏–µ –≥–æ–ª–æ—Å–∞
  const prefer = ['Microsoft Filip','Google Slovak'];
  const voices = (typeof speechSynthesis!=='undefined') ? speechSynthesis.getVoices() : [];
  let voice = null;
  if (voices && voices.length){
    voice = voices.find(v => prefer.some(p => v.name && v.name.toLowerCase().includes(p.toLowerCase())))
          voices.find(v => /sk|slovak/i.test(v.lang||'')  /slovak/i.test(v.name||''));
  }
  if (voice){
    const u = new SpeechSynthesisUtterance(text);
    u.voice = voice;
    u.lang  = voice.lang || 'sk-SK';
    u.rate = 0.95;
    u.pitch = 1.0;
    speechSynthesis.cancel();
    speechSynthesis.speak(u);
    return;
  }
  // 2) —Ä–µ–∑–µ—Ä–≤ ‚Äî –∞—É–¥–∏–æ —á–µ—Ä–µ–∑ Google Translate TTS
  const url = 'https://translate.google.com/translate_tts?ie=UTF-8&q='
              + encodeURIComponent(text) + '&tl=sk&client=tw-ob';
  const audio = new Audio(url);
  audio.play().catch(()=>{});
}

function toast(msg){
  elToast.textContent = msg;
  elToast.classList.add('show');
  setTimeout(()=>elToast.classList.remove('show'), 900);
}

function newRound(first=false){
  elGrid.innerHTML = '';
  if (!pool.length){ pool = [...ITEMS]; score=0; }
  current = pool.splice(Math.floor(Math.random()*pool.length),1)[0];

  const opts = [current, ...pick(3, ITEMS.filter(x=>x!==current))].sort(()=>Math.random()-0.5);

  elPrompt.textContent = ${UI[lang].find} ‚Äú${current[lang]}‚Äù;
  elScore.textContent  = ${score} / ${total};

  opts.forEach(opt=>{
    const card = document.createElement('div');
    card.className = 'card';
    card.innerHTML = `
      <div class="photo"><img src="${opt.img}" alt=""></div>
      <div class="title">${opt.sk}</div>
    `;
    card.onclick = ()=>{
      if (opt===current){
        card.classList.add('ok');
        score++;
        elScore.textContent = ${score} / ${total};
        speakSK(current.sk);
        toast('‚úî ' + opt.sk);
        setTimeout(newRound, 700);
      }else{
        card.classList.add('wrong');
        setTimeout(()=>card.classList.remove('wrong'), 350);
      }
    };
    elGrid.appendChild(card);
  });
}

/* === —Å–æ–±—ã—Ç–∏—è === */
document.querySelectorAll('.pill').forEach(b=>{
  b.addEventListener('click', ()=> setLang(b.dataset.lang));
});

// –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö –≥–æ–ª–æ—Å–∞ –ø–æ–¥–≥—Ä—É–∂–∞—é—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
if (typeof speechSynthesis!=='undefined'){
  speechSynthesis.onvoiceschanged = ()=>{};
}

// —Å—Ç–∞—Ä—Ç
setLang('ru');
</script>
</body>
</html>
    
